Koop_Tobias <- read.csv(choose.files(), header = T, na.strings = c("","NA") , stringsAsFactors = F)
View(Koop_Tobias)
sam_id = sample(1:2178,5)
sam_wage1 = dat[which(dat[,1] == sam_id[1]),][,c(5,3)]
plot(sam_wage1,type = "l")
sam_wage2 = dat[which(dat[,1] == sam_id[2]),][,c(5,3)]
plot(sam_wage2,type = "l")
sam_wage3 = dat[which(dat[,1] == sam_id[3]),][,c(5,3)]
plot(sam_wage3,type = "l")
sam_wage4 = dat[which(dat[,1] == sam_id[4]),][,c(5,3)]
plot(sam_wage4,type = "l")
sam_wage5 = dat[which(dat[,1] == sam_id[5]),][,c(5,3)]
plot(sam_wage5,type = "l")
sam_id = sample(1:2178,5)
sam_wage1 = dat[which(dat[,1] == sam_id[1]),][,c(5,3)]
plot(sam_wage1,type = "l")
sam_wage2 = dat[which(dat[,1] == sam_id[2]),][,c(5,3)]
plot(sam_wage2,type = "l")
sam_wage3 = dat[which(dat[,1] == sam_id[3]),][,c(5,3)]
plot(sam_wage3,type = "l")
sam_wage4 = dat[which(dat[,1] == sam_id[4]),][,c(5,3)]
plot(sam_wage4,type = "l")
sam_wage5 = dat[which(dat[,1] == sam_id[5]),][,c(5,3)]
plot(sam_wage5,type = "l")
dat = read.csv("~/Downloads/Koop-Tobias.csv")
dat <- read.csv(choose.files(), header = T, na.strings = c("","NA") , stringsAsFactors = F)
sam_id = sample(1:2178,5)
sam_wage1 = dat[which(dat[,1] == sam_id[1]),][,c(5,3)]
plot(sam_wage1,type = "l")
sam_wage2 = dat[which(dat[,1] == sam_id[2]),][,c(5,3)]
plot(sam_wage2,type = "l")
sam_wage3 = dat[which(dat[,1] == sam_id[3]),][,c(5,3)]
plot(sam_wage3,type = "l")
sam_wage4 = dat[which(dat[,1] == sam_id[4]),][,c(5,3)]
plot(sam_wage4,type = "l")
sam_wage5 = dat[which(dat[,1] == sam_id[5]),][,c(5,3)]
plot(sam_wage5,type = "l")
View(sam_wage1)
View(sam_wage2)
View(sam_wage3)
View(sam_wage4)
View(sam_wage5)
Koop_Tobias <- read.csv(choose.files(), header = T, na.strings = c("","NA") , stringsAsFactors = F)
View(Koop_Tobias)
sample(Koop_Tobias,5)
sample(nrow(Koop_Tobias),5)
sample(1:2178,5)
Koop_Tobias[sample(nrow(Koop_Tobias),5),]
sample5 <- Koop_Tobias[sample(nrow(Koop_Tobias),5),]
View(sample5)
sample(1:2178,5)
View(sample5)
ktobias <- read.csv(choose.files(), header = T, na.strings = c("","NA") , stringsAsFactors = F)
id <- sample(1:2178,5)
id1 <- subset(ktobias[,c(3,5)],ktobias$PERSONID==id[1])
View(id1)
plot(id1)
id1 <- subset(ktobias[,c(5,3)],ktobias$PERSONID==id[1])
id2 <- subset(ktobias[,c(5,3)],ktobias$PERSONID==id[2])
id3 <- subset(ktobias[,c(5,3)],ktobias$PERSONID==id[3])
id4 <- subset(ktobias[,c(5,3)],ktobias$PERSONID==id[4])
id5 <- subset(ktobias[,c(5,3)],ktobias$PERSONID==id[5])
plot(id1,"l")
plot(id1, type = "l")
plot(id2, type = "l")
plot(id3, type = "l")
logwage <- subset(ktobias[,c(3)])
educ <- subset(ktobias[,c(2)])
potexper <- subset(ktobias[,c(4)])
logwage <- subset(ktobias[,3])
logwage <- subset(ktobias[3,])
View(logwage)
logwage <- subset(ktobias[,3])
subset(ktobias[,3])
logwage <- ktobias[,3]
install.packages("nlme")
library(nlme)
install.packages("nlme")
library(nlme)
gls(logwage ~ 1 + educ + potexpr)
install.packages("nlme")
library(nlme)
gls(logwage ~ 1 + educ + potexpr)
logwage <- ktobias[,3]
educ <- ktobias[,2]
potexper <- ktobias[,4]
gls(logwage ~ 1 + educ + potexpr)
logwage <- as.matrix(ktobias[,3])
educ <- as.matrix(ktobias[,2])
potexper <- as.matrix(ktobias[,4])
gls(logwage ~ 1 + educ + potexpr)
gls(logwage ~ 1 + educ + potexper)
beta <- as.vector(gls(logwage ~ 1 + educ + potexper)$par)
View(beta)
beta <- as.vector(gls(logwage ~ 1 + educ + potexper)$coefficient)
logwage <- as.matrix(ktobias[,3])
educ <- as.matrix(ktobias[,2])
potexper <- as.matrix(ktobias[,4])
# install packages
install.packages("nlme")
library(nlme)
beta <- as.vector(gls(logwage ~ 1 + educ + potexper)$coefficient)
view(beta)
beta
View(ktobias)
logwage_mean <- aggregate(cbind(ktobias$lOGWAGE,ktobias$EDUC,ktobias$POTEXPER), ktobias$PERSONID, mean)
logwage_mean <- aggregate(cbind(ktobias$lOGWAGE,ktobias$EDUC,ktobias$POTEXPER)~ktobias$PERSONID, mean)
meanlogwage = aggregate(cbind(LOGWAGE,EDUC,POTEXPER) ~ PERSONID, data = ktobias, mean)
logwage_mean <- aggregate(cbind(ktobias$lOGWAGE,ktobias$EDUC,ktobias$POTEXPER) ~ ktobias$PERSONID, mean)
meanlogwage <- aggregate(ktobias$lOGWAGE ~ ktobias$PERSONID, mean)
meanlogwage <- aggregate(ktobias$lOGWAGE, ktobias$PERSONID, mean)
meanlogwage <- aggregate(ktobias$lOGWAGE ~ ktobias$PERSONID, mean)
logwage_mean <- aggregate(cbind(LOGWAGE,EDUC,POTEXPER) ~ PERSONID, data = ktobias, mean)
View(logwage_mean)
Mean <- aggregate(cbind(LOGWAGE,EDUC,POTEXPER) ~ PERSONID, data = ktobias, mean)
beta_FE_between <- as.vector(lm(Mean[,2] ~ Mean[,3] + Mean[,4])$coefficient)
beta_FE_between
View(Mean)
colnames(Mean) = c("PERSONID","MEAN_LOGWAGE","MEAN_EDUC","MEAN_POTEPER")
Within <- merge(ktobias, Mean)
View(Within)
colnames(Mean) = c("PERSONID","MEAN_LOGWAGE","MEAN_EDUC","MEAN_POTEXPER")
Within <- merge(ktobias, Mean)
Within$within_logwage <- Within[,3] - Within[,11]
Within$within_educ <- Within[,2] - Within[,12]
Within$within_potexpr <- Within[,4] - Within[,13]
colnames(Mean) = c("PERSONID","mean_logwage","mean_educ","mean_potexper")
Within <- merge(ktobias, Mean)
Within$within_logwage <- Within[,3] - Within[,11]
Within$within_educ <- Within[,2] - Within[,12]
Within$within_potexpr <- Within[,4] - Within[,13]
beta_FE_within <- as.vector(lm(Within[,14] ~ Within[,15] + Within[,16] - 1)$coefficient)
beta_FE_within
Fdiff <- cbind(ktobias[,1],logwage,educ,potexper)
View(Fdiff)
personid1 <- rbind(0,Fdiff$personid)
Fdiff1 <- rbind(0,Fdiff)
View(Fdiff1)
colnames(Fdiff) <- c("personid","logwage","educ","potexper")
View(Fdiff)
Fdiff2 <- Fdiff - Fidff1
Fdiff2 <- Fdiff - Fdiff1
View(Fdiff)
View(Fdiff1)
Fdiff <- cbind(ktobias[,1],logwage,educ,potexper)
colnames(Fdiff) <- c("personid","logwage","educ","potexper")
Fdiff1 <- rbind(0,Fdiff)
Fdiff <- rbind(Fidff,0)
Fdiff2 <- Fdiff1-Fidff
Fdiff <- cbind(ktobias[,1],logwage,educ,potexper)
colnames(Fdiff) <- c("personid","logwage","educ","potexper")
Fdiff1 <- rbind(0,Fdiff)
Fdiff <- rbind(Fdiff,0)
Fdiff2 <- Fdiff1-Fdiff
View(Fdiff2)
Fdiff <- cbind(ktobias[,1],logwage,educ,potexper)
colnames(Fdiff) <- c("personid","logwage","educ","potexper")
Fdiff1 <- rbind(0,Fdiff)
Fdiff <- rbind(Fdiff,0)
Fdiff2 <- Fdiff-Fdiff1
Fdiff <- cbind(ktobias[,1],logwage,educ,potexper)
colnames(Fdiff) <- c("personid","logwage","educ","potexper")
Fdiff1 <- rbind(0,Fdiff)
Fdiff <- rbind(Fdiff,1)
Fdiff2 <- Fdiff-Fdiff1
View(Fdiff2)
Fdiff2 <- Fdiff2[,c(1:17919)]
Fdiff2 <- Fdiff2[c(1:17919),]
View(Fdiff2)
colnames(Fdiff2) <- c("personid","logwage","educ","potexper")
Fdiff2$personid[personid == 1] = NA
Fdiff2[,1]][personid == 1] = NA
Fdiff2[,1][personid == 1] = NA
Fdiff2$personid
Fdiff2 <- as.matrix(Fdiff2)
View(Fdiff2)
Fdiff2$personid
Fdiff2 <- as.data.frame(Fdiff2)
Fdiff2$personid
Fdiff2$personid[personid==1] = NA
Fdiff2$personid[personid=="1"] = NA
Fdiff2[Fdiff2$personid=="1"] = NA
Fdiff2[Fdiff2$personid==1] = NA
Fdiff2[personid == 1] = NA
Fdiff2 <- as.matrix(Fdiff2)
Fdiff2[personid == 1] = NA
Fdiff2[Fdiff2$personid==1] = NA
Fdiff2 <- as.data.frame(Fdiff2)
Fdiff2[Fdiff2$personid==1] = NA
Fdiff2$personid[Fdiff2$personid == 1] = NA
View(Fdiff2)
Fdiff2 <- na.omit(Fdiff2)
View(Fdiff2)
beta_FE_Fdiff <- as.vector(lm(Fdiff2[,2] ~ Fdiff2[,3] + Fdiff2[,4])$coefficient)
beta_FE_Fdiff
id100 <- sample(1:2178,100)
ktobias100 <- ktobias[ktobias[,1]%in%id100,]
View(ktobias100)
id100
probit <- function(beta,x,y){
l = sum(y*log(pnorm(x%*%b)))-sum((1-y)*log(1-pnorm(x%*%b)))
l = -l
return{l}
}
X <- as.matrix(ktobias100[,c(2,4)])
Y <- as.matrix(ktobias100[,3])
beta_IFE <- optim(c(0,0), probit, X, Y)$par
probit <- function(beta,x,y){
l = sum(y*log(pnorm(x%*%b)))-sum((1-y)*log(1-pnorm(x%*%b)))
l = -l
return(l)
}
X <- as.matrix(ktobias100[,c(2,4)])
Y <- as.matrix(ktobias100[,3])
beta_IFE <- optim(c(0,0), probit, X, Y)$par
beta_IFE <- optim(c(0,0), probit, x=X, y=Y)$par
View(X)
View(Y)
View(X)
probit <- function(beta,x,y){
l = sum(y*log(pnorm(x%*%beta)))-sum((1-y)*log(1-pnorm(x%*%beta)))
l = -l
return(l)
}
X <- as.matrix(ktobias100[,c(2,4)])
Y <- as.matrix(ktobias100[,3])
beta_IFE <- optim(c(0,0), probit, x=X, y=Y)$par
beta_IFE
id100 <- sample(1:2178,100)
ktobias100 <- ktobias[ktobias[,1]%in%id100,]
probit <- function(beta,x,y){
l = sum(y*log(pnorm(x%*%beta)))-sum((1-y)*log(1-pnorm(x%*%beta)))
l = -l
return(l)
}
#
X <- as.matrix(ktobias100[,c(2,4)])
Y <- as.matrix(ktobias100[,3])
# estimate the individual fixed effect parameters
beta_IFE <- optim(c(0,0), probit, x=X, y=Y)$par
beta_IFE
Mean100 <- aggregate(cbind(LOGWAGE,EDUC,POTEXPER) ~ PERSONID, data = ktobias100, mean)
View(Mean100)
alpha <- Mean100[,2] - (Mean100[,3]*beta_IFE[1] + Mean100[,4]*beta_IFE[2])
alpha < -as.matrix(alpha)
alpha <- as.matrix(Mean100[,2] - (Mean100[,3]*beta_IFE[1] + Mean100[,4]*beta_IFE[2]))
View(alpha)
X2 <- as.matrix(ktobias100[,6:10])
model5 = lm(alpha ~ X2)
ktobias100 <- ktobias100[!duplicated(ktobias100$PERSONID),]
X2 <- as.matrix(ktobias100[,6:10])
model5 = lm(alpha ~ X2)
View(model5)
summary(model5)
beta_IFE_iv <- as.vector(lm(alpha ~ X2)$coefficient)
beta_IFE_iv
